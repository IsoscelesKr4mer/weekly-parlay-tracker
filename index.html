<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fantasy Football Parlay Tracker</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🏈 Fantasy Football Parlay Tracker</h1>
            <p>Collective Hive Mind Betting</p>
            <div class="lock-controls">
                <button id="lockBtn" onclick="togglePicksLock()" style="background: #ef4444; color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; font-size: 14px; margin-top: 10px;">
                    🔒 Lock Week 1
                </button>
            </div>
        </div>
        
        <div class="tabs">
            <button class="tab active" onclick="switchTab('picks', this)">Weekly Picks</button>
            <button class="tab" onclick="switchTab('summary', this)">Parlay Summary</button>
            <button class="tab" onclick="switchTab('leaderboard', this)">Leaderboard</button>
        </div>
        
        <div class="tab-content">
            <div id="picks" class="tab-pane active">
                <div class="bet-info-card">
                    <div class="bet-input-section">
                        <label for="betAmount">Bet Amount ($):</label>
                        <input type="number" id="betAmount" value="24" min="1" step="1" placeholder="Enter bet amount">
                        <button id="updateBetBtn" onclick="confirmBetAmountUpdate()" style="background: #3b82f6; color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; font-size: 14px; margin-left: 8px;">Update</button>
                    </div>
                    <div class="bet-results-section">
                        <div class="bet-result-item">
                            <span class="bet-result-label">Total Odds:</span>
                            <span class="bet-result-value" id="totalOddsDisplay">+100</span>
                        </div>
                        <div class="bet-result-item">
                            <span class="bet-result-label">Total Payout:</span>
                            <span class="bet-result-value" id="totalPayoutDisplay">$200.00</span>
                        </div>
                    </div>
                </div>
                
                <div class="week-selector">
                    <label for="currentWeek">Week:</label>
                    <select id="currentWeek" onchange="updateWeek()">
                        <option value="1">Week 1</option>
                        <option value="2">Week 2</option>
                        <option value="3">Week 3</option>
                        <option value="4">Week 4</option>
                        <option value="5">Week 5</option>
                        <option value="6">Week 6</option>
                        <option value="7">Week 7</option>
                        <option value="8">Week 8</option>
                        <option value="9">Week 9</option>
                        <option value="10">Week 10</option>
                        <option value="11">Week 11</option>
                        <option value="12">Week 12</option>
                        <option value="13">Week 13</option>
                        <option value="14">Week 14</option>
                        <option value="15">Week 15</option>
                        <option value="16">Week 16</option>
                        <option value="17">Week 17</option>
                        <option value="18">Week 18</option>
                    </select>
                    
                    <div style="margin-left: 40px; display: flex; align-items: center; gap: 15px;">
                        <label for="numberOfLegs">Parlay Legs:</label>
                        <select id="numberOfLegs" onchange="renderAllPicks()">
                            <option value="2">2 Legs</option>
                            <option value="3">3 Legs</option>
                            <option value="4">4 Legs</option>
                            <option value="5">5 Legs</option>
                            <option value="6">6 Legs</option>
                            <option value="7">7 Legs</option>
                            <option value="8">8 Legs</option>
                            <option value="9">9 Legs</option>
                            <option value="10">10 Legs</option>
                            <option value="11">11 Legs</option>
                            <option value="12" selected>12 Legs</option>
                            <option value="13">13 Legs</option>
                            <option value="14">14 Legs</option>
                            <option value="15">15 Legs</option>
                            <option value="16">16 Legs</option>
                            <option value="17">17 Legs</option>
                            <option value="18">18 Legs</option>
                            <option value="19">19 Legs</option>
                            <option value="20">20 Legs</option>
                        </select>
                    </div>
                </div>
                
                <div style="display: flex; gap: 15px; margin-bottom: 30px;">
                    <button class="btn" onclick="saveAllPicks()">💾 Save All Picks</button>
                    <button class="btn" onclick="clearAllPicks()" style="background: #f44336;">🗑️ Clear All</button>
                    <button class="btn" onclick="showBackupManager()" style="background: #6b7280;">📋 View Backups</button>
                    <button class="btn" onclick="restoreBackup(currentWeek)" style="background: #10b981;">🔄 Restore Week</button>
                </div>
                
                <div id="pickSlotsContainer"></div>
            </div>
            
            <div id="summary" class="tab-pane">
                <div class="summary-header">
                    <div class="summary-title-section">
                    <h2 style="color: #333; margin: 0;">Week <span id="summaryWeek">1</span> Parlay Summary</h2>
                        <div id="parlayStatus" style="display: flex; align-items: center; gap: 10px; padding: 12px 20px; border-radius: 25px; font-size: 18px; font-weight: bold; background: linear-gradient(135deg, #4CAF50, #45a049); color: white; box-shadow: 0 4px 8px rgba(0,0,0,0.2);">
                            <span id="parlayStatusIcon">💚</span>
                            <span id="parlayStatusText">Parlay Still Alive</span>
                        </div>
                    </div>
                    <div class="summary-week-selector">
                        <label for="summaryWeekSelect">Week:</label>
                        <select id="summaryWeekSelect" onchange="updateWeekFromSummary()">
                            <option value="1">Week 1</option>
                            <option value="2">Week 2</option>
                            <option value="3">Week 3</option>
                            <option value="4">Week 4</option>
                            <option value="5">Week 5</option>
                            <option value="6">Week 6</option>
                            <option value="7">Week 7</option>
                            <option value="8">Week 8</option>
                            <option value="9">Week 9</option>
                            <option value="10">Week 10</option>
                            <option value="11">Week 11</option>
                            <option value="12">Week 12</option>
                            <option value="13">Week 13</option>
                            <option value="14">Week 14</option>
                            <option value="15">Week 15</option>
                            <option value="16">Week 16</option>
                            <option value="17">Week 17</option>
                            <option value="18">Week 18</option>
                        </select>
                    </div>
                </div>
                
                <div style="background: white; border-radius: 15px; padding: 20px; margin-bottom: 20px; box-shadow: 0 4px 8px rgba(0,0,0,0.1);">
                    <div class="summary-bet-info" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; padding-bottom: 15px; border-bottom: 1px solid #e2e8f0;">
                        <div class="summary-bet-display">
                            <label>Bet Amount:</label>
                            <span id="summaryBetAmountDisplay" style="font-weight: 600; color: #374151; margin-left: 8px;">$24</span>
                        </div>
                        <div class="summary-bet-results" style="display: flex; gap: 24px;">
                            <div style="text-align: center;">
                                <div style="font-size: 12px; color: #6b7280; font-weight: 500;">Total Odds</div>
                                <div id="summaryTotalOdds" style="font-size: 18px; font-weight: 700; color: #3b82f6;">+100</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 12px; color: #6b7280; font-weight: 500;">Total Payout</div>
                                <div id="summaryTotalPayout" style="font-size: 18px; font-weight: 700; color: #10b981;">$200.00</div>
                            </div>
                        </div>
                    </div>
                    <h3 style="margin-bottom: 15px; color: #333;">Your Picks</h3>
                    <div id="picksSummary" style="display: flex; flex-direction: column; gap: 10px;"></div>
                </div>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 20px;">
                    <div style="background: white; border-radius: 12px; padding: 20px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); border-left: 4px solid #4CAF50;">
                        <div style="color: #666; font-size: 14px; margin-bottom: 5px;">Total Parlay Odds</div>
                        <div id="totalOdds" style="font-size: 28px; font-weight: bold; color: #4CAF50;">+0</div>
                    </div>
                    <div style="background: white; border-radius: 12px; padding: 20px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); border-left: 4px solid #2196F3;">
                        <div style="color: #666; font-size: 14px; margin-bottom: 5px;">Total Picks</div>
                        <div id="totalPicks" style="font-size: 28px; font-weight: bold; color: #2196F3;">0</div>
                    </div>
                    <div style="background: white; border-radius: 12px; padding: 20px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); border-left: 4px solid #FF9800;">
                        <div style="color: #666; font-size: 14px; margin-bottom: 5px;">Bet Amount</div>
                        <div id="summaryBetAmountCard" style="font-size: 28px; font-weight: bold; color: #FF9800;">$24</div>
                    </div>
                    <div style="background: white; border-radius: 12px; padding: 20px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); border-left: 4px solid #9C27B0;">
                        <div style="color: #666; font-size: 14px; margin-bottom: 5px;">Potential Winnings</div>
                        <div id="potentialWinnings" style="font-size: 28px; font-weight: bold; color: #9C27B0;">$0</div>
                    </div>
                </div>
                
                
                <div style="background: white; border-radius: 15px; padding: 25px; box-shadow: 0 4px 8px rgba(0,0,0,0.1);">
                    <h3 style="margin-bottom: 20px; color: #333;">Payout Breakdown</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                        <div style="padding: 15px; background: #f5f5f5; border-radius: 8px;">
                            <div style="color: #666; font-size: 14px; margin-bottom: 5px;">Taxes (30%)</div>
                            <div id="taxes" style="font-size: 24px; font-weight: bold; color: #f44336;">$0</div>
                        </div>
                        <div style="padding: 15px; background: #f5f5f5; border-radius: 8px;">
                            <div style="color: #666; font-size: 14px; margin-bottom: 5px;">Net Winnings</div>
                            <div id="netWinnings" style="font-size: 24px; font-weight: bold; color: #4CAF50;">$0</div>
                        </div>
                        <div style="padding: 15px; background: #f5f5f5; border-radius: 8px;">
                            <div style="color: #666; font-size: 14px; margin-bottom: 5px;">Per Person (Total)</div>
                            <div id="perPerson" style="font-size: 24px; font-weight: bold; color: #2196F3;">$0</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div id="leaderboard" class="tab-pane">
                <div class="leaderboard">
                    <div class="leaderboard-header">
                        <h2>Season Leaderboard</h2>
                        <p>Track everyone picking performance</p>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>Rank</th>
                                <th>Player</th>
                                <th>Wins</th>
                                <th>Losses</th>
                                <th>Draws</th>
                                <th>Win %</th>
                                <th>Contributions</th>
                            </tr>
                        </thead>
                        <tbody id="leaderboardBody">
                            <tr><td colspan="7" style="text-align: center; color: #666;">No data available</td></tr>
                        </tbody>
                    </table>
                </div>
                
                <div style="margin-top: 30px;">
                    <button class="btn" onclick="resetLeaderboard()">Reset Season Stats</button>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    
    <script src="app.js"></script>
</body>
</html>
